---
title: "Analiza GPU"
author: "adamf6769"
date: "`r Sys.Date()`"
output: workflowr::wflow_html
editor_options:
  chunk_output_type: console
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

# Wprowadzenie

<!--30xx itp. zwraca uwagę na różne GENERACJE, nie konkretne karty [czyli 3060, 3070 i 3080 należą do tej samej generacji]-->

W tej analizie przyjrzymy się rynkowi kart graficznych (GPU) z trzech głównych generacji:
- NVIDIA GeForce RTX 30xx (2020-2021)
- NVIDIA GeForce RTX 40xx (2022-2023)
- AMD Radeon RX 7xxx (2022-2023)

<!--Zdjęcie poglądowe jednego z badanych produktów-->
```{r gpu-zdjecie, echo=FALSE, out.width="80%", fig.align='center'}

knitr::include_graphics("assets/gpu.png")
```



## Cel analizy

Zbadamy zależności między:
- **Ceną** a **wydajnością**
- **Pamięcią VRAM** a **ceną**
- **Poborem mocy (TDP)** a **wydajnością**
- Porównamy oferty NVIDIA i AMD

---

# Wczytanie i przygotowanie danych


## Ładowanie bibliotek
```{r biblioteki}
library(tidyverse) 
library(knitr)      
```


<!--Plik znajduje się w katalogu data-->
## Wczytanie danych
```{r wczytanie-danych}
gpu_data <- read.csv("data/gpu_dane.csv", 
                     fileEncoding = "UTF-8",
                     stringsAsFactors = FALSE)

head(gpu_data)
```

## Podstawowe statystyki
```{r statystyki-podstawowe}
summary(gpu_data)
str(gpu_data)
```

**Zbiór zawiera:**
- `r nrow(gpu_data)` kart graficznych
- `r ncol(gpu_data)` zmiennych (kolumn)
- Dane o cenach, wydajności, specyfikacji technicznej

---

# Przetwarzanie danych z dplyr

## 1. Filtrowanie danych - karty w przedziale cenowym
```{r filter-cena}
#Karty w przedziale 2000-5000 PLN (segment średni/wysoki)
gpu_mid_high <- gpu_data %>%
  filter(Cena_PLN >= 2000 & Cena_PLN <= 5000) %>%
  arrange(desc(Wydajnosc_FPS))

#Wyświetlenie wyników
kable(gpu_mid_high, 
      caption = "Karty graficzne w przedziale 2000-5000 PLN")
```

**Interpretacja:**  
W tym przedziale cenowym mamy `r nrow(gpu_mid_high)` modeli. To najczęściej wybierany segment przez graczy - oferuje dobrą wydajność bez astronomicznych cen.

---

## 2. Dodanie nowych zmiennych - mutate
```{r mutate-wskazniki}
#Wskaźnik wydajności
gpu_data <- gpu_data %>%
  mutate(
    #Wydajność na złotówkę (FPS/PLN)
    Wydajnosc_na_zlotowke = round(Wydajnosc_FPS / Cena_PLN, 4),
    
    #Wydajność na Wat (FPS/W)
    Wydajnosc_na_Wat = round(Wydajnosc_FPS / TDP_W, 2),
    
    #Kategoria cenowa
    Kategoria_cenowa = case_when(
      Cena_PLN < 2000 ~ "Budget",
      Cena_PLN >= 2000 & Cena_PLN < 4000 ~ "Mid-range",
      Cena_PLN >= 4000 & Cena_PLN < 7000 ~ "High-end",
      Cena_PLN >= 7000 ~ "Enthusiast"
    ),
    
    # Cena za 1 GB VRAM
    Cena_za_GB_VRAM = round(Cena_PLN / VRAM_GB, 0)
  )

#Najlepsze karty pod względem wydajności na złotówkę
gpu_data %>%
  select(Model, Producent, Cena_PLN, Wydajnosc_FPS, Wydajnosc_na_zlotowke) %>%
  arrange(desc(Wydajnosc_na_zlotowke)) %>%
  head(5) %>%
  kable(caption = "TOP 5: Najlepsza wydajność na złotówkę")
```

**Interpretacja:**  
Model **`r gpu_data %>% arrange(desc(Wydajnosc_na_zlotowke)) %>% slice(1) %>% pull(Model)`** oferuje najlepszy stosunek wydajności do ceny (`r gpu_data %>% arrange(desc(Wydajnosc_na_zlotowke)) %>% slice(1) %>% pull(Wydajnosc_na_zlotowke)` FPS/PLN).

---

## 3. Grupowanie i agregacja - group_by + summarise
```{r groupby-producent}
#Porównanie producentów
porownanie_producentow <- gpu_data %>%
  group_by(Producent) %>%
  summarise(
    Liczba_modeli = n(),
    Srednia_cena = round(mean(Cena_PLN), 0),
    Srednia_wydajnosc = round(mean(Wydajnosc_FPS), 1),
    Sredni_TDP = round(mean(TDP_W), 0),
    Srednie_VRAM = round(mean(VRAM_GB), 1),
    Max_wydajnosc = max(Wydajnosc_FPS),
    Min_cena = min(Cena_PLN)
  ) %>%
  arrange(desc(Srednia_wydajnosc))

kable(porownanie_producentow,
      caption = "Porównanie producentów GPU")
```

**Interpretacja:**  
- **NVIDIA** ma średnio wyższą wydajność (`r porownanie_producentow %>% filter(Producent == "NVIDIA") %>% pull(Srednia_wydajnosc)` FPS)
- **AMD** oferuje niższą średnią cenę (`r porownanie_producentow %>% filter(Producent == "AMD") %>% pull(Srednia_cena)` PLN)
```{r groupby-generacja}
#Analiza pod kątem generacji
analiza_generacji <- gpu_data %>%
  group_by(Generacja, Producent) %>%
  summarise(
    Liczba_modeli = n(),
    Srednia_cena = round(mean(Cena_PLN), 0),
    Srednia_wydajnosc = round(mean(Wydajnosc_FPS), 1),
    .groups = "drop"
  ) %>%
  arrange(Generacja, Producent)

kable(analiza_generacji,
      caption = "Analiza pod kątem generacji i producenta")
```

---

# Wizualizacje danych

## Wykres 1: Zależność ceny od wydajności
```{r wykres-cena-wydajnosc, fig.width=10, fig.height=6}
ggplot(gpu_data, aes(x = Cena_PLN, y = Wydajnosc_FPS)) +
  #Podział na producentów
  geom_point(aes(color = Producent, size = VRAM_GB), alpha = 0.7) +
  
  #Linia trendu
  geom_smooth(method = "lm", se = TRUE, color = "black", linetype = "dashed") +
  
  #Etykiety dla wybranych modeli
geom_text(data = gpu_data %>% 
            filter(Model == "RTX 4090"),
          aes(label = Model), 
          vjust = -1, size = 3) +
  
  #Tytuły i opisy
  labs(
    title = "Zależność wydajności od ceny",
    subtitle = "Porównanie modeli NVIDIA i AMD",
    x = "Cena (PLN)",
    y = "Wydajność (FPS w 1440p)",
    color = "Producent",
    size = "VRAM (GB)",
    caption = "Źródło: Dane rynkowe z 2024 roku"
  ) +
  
  #Motyw
  theme_minimal(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", size = 16),
    plot.subtitle = element_text(size = 12, color = "gray40"),
    legend.position = "right"
  ) +
  
  #Kolory dla producentów
  scale_color_manual(values = c("NVIDIA" = "#76B900", "AMD" = "#ED1C24"))
```

**Interpretacja wykresu:**

1. **Wyraźna korelacja dodatnia** - droższe karty oferują wyższą wydajność
2. **NVIDIA (zielone punkty)** dominuje w segmencie high-end (>7000 PLN)
3. **AMD (czerwone punkty)** oferuje konkurencyjne ceny w segmencie mid-range
4. Większe punkty = więcej pamięci VRAM (ważne dla gier w wysokich rozdzielczościach)

---

## Wykres 2: Porównanie wydajności według kategorii cenowej
```{r wykres-kategorie, fig.width=10, fig.height=6}
gpu_by_category <- gpu_data %>%
  group_by(Kategoria_cenowa, Producent) %>%
  summarise(
    Srednia_wydajnosc = mean(Wydajnosc_FPS),
    .groups = "drop"
  )


print(gpu_by_category)

ggplot(gpu_by_category, aes(x = Kategoria_cenowa, 
                             y = Srednia_wydajnosc, 
                             fill = Producent)) +
  geom_col(position = "dodge", width = 0.7) +
  geom_text(aes(label = round(Srednia_wydajnosc, 0)),
            position = position_dodge(width = 0.7),
            vjust = -0.5,
            size = 4) +
  labs(
    title = "Średnia wydajność GPU według kategorii cenowej",
    subtitle = "Porównanie NVIDIA vs AMD",
    x = "Kategoria cenowa",
    y = "Średnia wydajność (FPS w 1440p)",
    fill = "Producent"
  ) +
  theme_minimal(base_size = 12) +
  scale_fill_manual(values = c("NVIDIA" = "#76B900", "AMD" = "#ED1C24")) +
  scale_x_discrete(limits = c("Budget", "Mid-range", "High-end", "Enthusiast"))
```

**Interpretacja wykresu:**

1. W kategoriach **Budget** i **Mid-range** różnice między NVIDIA a AMD są niewielkie
2. NVIDIA wyraźnie dominuje w kategorii **Enthusiast** (RTX 4090 z 165 FPS)
3. Największy skok wydajności występuje między **High-end** a **Enthusiast**
4. Dla graczy o ograniczonym budżecie, AMD oferuje konkurencyjną wydajność

---

## Wykres 3: Efektywność energetyczna (Wydajność vs TDP)
```{r wykres-tdp, fig.width=10, fig.height=6}
ggplot(gpu_data, aes(x = TDP_W, y = Wydajnosc_FPS)) +

  geom_point(aes(color = Generacja, shape = Producent), size = 4, alpha = 0.7) +
  

  geom_hline(yintercept = mean(gpu_data$Wydajnosc_FPS), 
             linetype = "dashed", color = "gray50", alpha = 0.5) +
  geom_vline(xintercept = mean(gpu_data$TDP_W), 
             linetype = "dashed", color = "gray50", alpha = 0.5) +
  
 
  geom_text(data = gpu_data %>% 
              filter(Model %in% c("RTX 4090", "RTX 4060 Ti", "RX 7600")),
            aes(label = Model), 
            vjust = -1, size = 3, fontface = "bold") +
  

  labs(
    title = "Efektywność GPU",
    subtitle = "Zależność TCP a wydajność",
    x = "TDP - Pobór mocy (Waty)",
    y = "Wydajność (FPS)",
    color = "Generacja",
    shape = "Producent",
    caption = "Linie przerywane = średnie wartości"
  ) +
  
  theme_minimal(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", size = 16),
    plot.subtitle = element_text(size = 12, color = "gray40"),
    legend.position = "right"
  ) +
  
  #Kolory dla różnych generacji
  scale_color_brewer(palette = "Set2")
```

**Interpretacja wykresu:**

1. **Nowsze generacje** (40xx, 7xxx) są bardziej efektywne energetycznie
2. **RTX 4090** mimo wysokiego TDP (450W) oferuje najwyższą wydajność
3. **RTX 4060 Ti** i **RX 7600** to najefektywniejsze modele (niski TDP, przyzwoita wydajność)
4. Karty z generacji **30xx** mają gorszą efektywność energetyczną niż nowsze modele

**Ważne dla użytkowników:**
- Niższy TDP = niższe rachunki za prąd
- Niższy TDP = mniejsze wymagania dla zasilacza
- Niższy TDP = mniej hałasu (wentylatory pracują wolniej)

---

# Podsumowanie i wnioski

## Kluczowe odkrycia
```{r podsumowanie-statystyki}
# Najlepsza wydajność na złotówkę
best_value <- gpu_data %>%
  arrange(desc(Wydajnosc_na_zlotowke)) %>%
  slice(1)

# Najefektywniejsza energetycznie
best_efficiency <- gpu_data %>%
  arrange(desc(Wydajnosc_na_Wat)) %>%
  slice(1)

# Najbardziej opłacalna w danej kategorii
best_midrange <- gpu_data %>%
  filter(Kategoria_cenowa == "Mid-range") %>%
  arrange(desc(Wydajnosc_na_zlotowke)) %>%
  slice(1)
```

### Rekomendacje zakupowe

1. **Najlepsza wydajność/cena:** **`r best_value$Model`**  
   - Cena: `r best_value$Cena_PLN` PLN
   - Wydajność: `r best_value$Wydajnosc_FPS` FPS
   - Wskaźnik: `r best_value$Wydajnosc_na_zlotowke` FPS/PLN

2. **Najlepsza w segmencie Mid-range:** **`r best_midrange$Model`**  
   - Cena: `r best_midrange$Cena_PLN` PLN
   - Świetny balans ceny i wydajności

3. **Najefektywniejsza energetycznie:** **`r best_efficiency$Model`**  
   - TDP: `r best_efficiency$TDP_W` W
   - Wskaźnik: `r best_efficiency$Wydajnosc_na_Wat` FPS/W

### Ogólne wnioski

- **NVIDIA** może zaoferować wyższą wydajność, ale kosztem wyższej ceny
- **AMD** to lepsza opcja dla użytkowników z bardziej ograniczonym budżetem
- Nowsze generacje (40xx, 7xxx) są znacznie bardziej efektywne energetycznie
- W segmencie **Mid-range** różnice między producentami są minimalne
- Pamięć VRAM rośnie wraz z ceną, ale nie zawsze proporcjonalnie

---

# Użyte techniki analizy danych

W tej analizie wykorzystano:

## Pakiet dplyr:
- `filter()` - filtrowanie kart w określonym przedziale cenowym
- `mutate()` - tworzenie nowych zmiennych (wskaźniki wydajności)
- `group_by()` - grupowanie według producenta i generacji
- `summarise()` - obliczanie statystyk dla grup
- `arrange()` - sortowanie wyników
- `select()` - wybieranie kolumn

## Pakiet ggplot2:
- `geom_point()` - wykres punktowy (scatter plot)
- `geom_col()` - wykres słupkowy (bar chart)
- `geom_smooth()` - linia trendu
- `geom_text()` - etykiety na wykresach
- Personalizacja kolorów, tematów, opisów osi

## Inne:
- `kable()` - ładne formatowanie tabel
- R Markdown - dynamiczne generowanie raportów

---

*Analiza została wykonana: `r Sys.Date()`*  
*Autor: adamf6769*
